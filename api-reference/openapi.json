{"openapi":"3.0.0","paths":{"/health":{"get":{"operationId":"AppController_health","parameters":[],"responses":{"200":{"description":""}},"tags":["App"]}},"/v1/auth/users":{"post":{"operationId":"AuthController_createUser_v1","parameters":[{"name":"x-admin-key","in":"header","description":"Admin secret key passed as environment variable","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserDto"}}}},"responses":{"201":{"description":"User created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}},"409":{"description":"Email already exists"}},"summary":"Create a new user","tags":["Auth"]}},"/v1/auth/login":{"post":{"operationId":"AuthController_login_v1","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDto"}}}},"responses":{"200":{"description":"Login successful","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponseDto"}}}},"401":{"description":"Invalid credentials"}},"summary":"User login","tags":["Auth"]}},"/v1/auth/keys":{"post":{"operationId":"AuthController_createKey_v1","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateKeyDto"}}}},"responses":{"201":{"description":"Key created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KeyResponseDto"}}}}},"summary":"Create API key","tags":["Auth"]},"delete":{"operationId":"AuthController_deleteKey_v1","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteKeyDto"}}}},"responses":{"204":{"description":"Key deleted successfully"}},"summary":"Delete API key","tags":["Auth"]}},"/v1/ledgers":{"post":{"description":"Creates a new ledger with the provided name and description","operationId":"LedgerController_createLedger_v1","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateLedgerDto"}}}},"responses":{"201":{"description":"The ledger has been successfully created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LedgerResponseDto"}}}},"400":{"description":"Invalid input data"},"401":{"description":"Invalid or missing API key"}},"security":[{"basic":[]}],"summary":"Create a new ledger","tags":["ledgers"]},"get":{"description":"Retrieves a paginated list of ledgers","operationId":"LedgerController_listLedgers_v1","parameters":[{"name":"limit","required":false,"in":"query","description":"Number of items per page","schema":{"minimum":0,"maximum":1000,"default":15,"example":10,"type":"number"}},{"name":"afterCursor","required":false,"in":"query","description":"Return items that appear after the item identified by this cursor","schema":{"example":"01234567-89ab-cdef-0123-456789abcdef","type":"string"}},{"name":"beforeCursor","required":false,"in":"query","description":"Return items that appear before the item identified by this cursor","schema":{"example":"fedcba98-7654-3210-fedc-ba9876543210","type":"string"}},{"name":"cursor","required":false,"in":"query","description":"Cursor for pagination","schema":{"example":"01234567-89ab-cdef-0123-456789abcdef","type":"string"}}],"responses":{"200":{"description":"The ledgers have been successfully retrieved","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/LedgerResponseDto"}},"nextCursor":{"type":"string","description":"Cursor for the next page","example":"01234567-89ab-cdef-0123-456789abcdef"},"prevCursor":{"type":"string","description":"Cursor for the previous page","example":"01234567-89ab-cdef-0123-456789abcdef"},"hasNext":{"type":"boolean","description":"Whether there are more items after this page"},"hasPrev":{"type":"boolean","description":"Whether there are more items before this page"}}}}}},"401":{"description":"Invalid or missing API key"}},"security":[{"basic":[]}],"summary":"List ledgers","tags":["ledgers"]}},"/v1/ledgers/{id}":{"get":{"description":"Retrieves a single ledger by its unique identifier","operationId":"LedgerController_retrieveLedger_v1","parameters":[{"name":"id","required":true,"in":"path","description":"Unique identifier of the ledger","schema":{"example":"01234567-89ab-cdef-0123-456789abcdef","type":"string"}}],"responses":{"200":{"description":"The ledger has been successfully retrieved","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LedgerResponseDto"}}}},"401":{"description":"Invalid or missing API key"},"404":{"description":"Ledger not found"}},"security":[{"basic":[]}],"summary":"Get a ledger by ID","tags":["ledgers"]},"patch":{"description":"Updates an existing ledger by its unique identifier with the provided fields","operationId":"LedgerController_updateLedger_v1","parameters":[{"name":"id","required":true,"in":"path","description":"Unique identifier of the ledger to update","schema":{"example":"01234567-89ab-cdef-0123-456789abcdef","type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateLedgerDto"}}}},"responses":{"200":{"description":"The ledger has been successfully updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LedgerResponseDto"}}}},"401":{"description":"Invalid or missing API key"},"404":{"description":"Ledger not found"}},"security":[{"basic":[]}],"summary":"Update a ledger by ID","tags":["ledgers"]}},"/v1/ledger_accounts":{"post":{"description":"Creates a new ledger account with the provided details","operationId":"LedgerAccountController_createLedgerAccount_v1","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateLedgerAccountDto"}}}},"responses":{"201":{"description":"The ledger account has been successfully created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LedgerAccountResponseDto"}}}},"400":{"description":"Invalid input data"},"401":{"description":"Invalid or missing API key"}},"security":[{"basic":[]}],"summary":"Create a new ledger account","tags":["ledger-accounts"]},"get":{"description":"Retrieves a paginated list of ledger accounts","operationId":"LedgerAccountController_listAccounts_v1","parameters":[{"name":"limit","required":false,"in":"query","description":"Number of items per page","schema":{"minimum":0,"maximum":1000,"default":15,"example":10,"type":"number"}},{"name":"afterCursor","required":false,"in":"query","description":"Return items that appear after the item identified by this cursor","schema":{"example":"01234567-89ab-cdef-0123-456789abcdef","type":"string"}},{"name":"beforeCursor","required":false,"in":"query","description":"Return items that appear before the item identified by this cursor","schema":{"example":"fedcba98-7654-3210-fedc-ba9876543210","type":"string"}},{"name":"ledgerId","required":false,"in":"query","description":"Filter by ledger ID","schema":{"example":"550e8400-e29b-41d4-a716-446655440000","type":"string"}},{"name":"currency","required":false,"in":"query","description":"Filter by currency code","schema":{"example":"USD","type":"string"}},{"name":"normalBalance","required":false,"in":"query","description":"Filter by normal balance type","schema":{"enum":["credit","debit"],"type":"string"}},{"name":"search","required":false,"in":"query","description":"Search by account name, description, or external ID","schema":{"example":"Cash Account","type":"string"}},{"name":"metadata","required":false,"in":"query","description":"Filter by metadata key/value pairs using Stripe convention: ?metadata[key]=value","schema":{"type":"object","additionalProperties":{"type":"string"}}},{"name":"cursor","required":false,"in":"query","description":"Cursor for pagination","schema":{"example":"01234567-89ab-cdef-0123-456789abcdef","type":"string"}}],"responses":{"200":{"description":"The ledger accounts have been successfully retrieved","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/LedgerAccountResponseDto"}},"nextCursor":{"type":"string","description":"Cursor for the next page","example":"01234567-89ab-cdef-0123-456789abcdef"},"prevCursor":{"type":"string","description":"Cursor for the previous page","example":"01234567-89ab-cdef-0123-456789abcdef"},"hasNext":{"type":"boolean","description":"Whether there are more items after this page"},"hasPrev":{"type":"boolean","description":"Whether there are more items before this page"}}}}}},"401":{"description":"Invalid or missing API key"}},"security":[{"basic":[]}],"summary":"List ledger accounts","tags":["ledger-accounts"]}},"/v1/ledger_accounts/{id}":{"get":{"description":"Retrieves a single ledger account by its unique identifier","operationId":"LedgerAccountController_retrieveLedgerAccount_v1","parameters":[{"name":"id","required":true,"in":"path","description":"Unique identifier or externalId of the ledger account","schema":{"example":"01234567-89ab-cdef-0123-456789abcdef","type":"string"}}],"responses":{"200":{"description":"The ledger account has been successfully retrieved","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LedgerAccountResponseDto"}}}},"401":{"description":"Invalid or missing API key"},"404":{"description":"Ledger account not found"}},"security":[{"basic":[]}],"summary":"Get a ledger account by ID","tags":["ledger-accounts"]},"patch":{"description":"Updates an existing ledger account by its unique identifier with the provided fields","operationId":"LedgerAccountController_updateLedgerAccount_v1","parameters":[{"name":"id","required":true,"in":"path","description":"Unique identifier of the ledger account to update","schema":{"example":"01234567-89ab-cdef-0123-456789abcdef","type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateLedgerAccountDto"}}}},"responses":{"200":{"description":"The ledger account has been successfully updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LedgerAccountResponseDto"}}}},"400":{"description":"Invalid input data"},"401":{"description":"Invalid or missing API key"},"404":{"description":"Ledger account not found"}},"security":[{"basic":[]}],"summary":"Update a ledger account by ID","tags":["ledger-accounts"]}},"/v1/currencies":{"post":{"description":"Creates a new currency with the provided details","operationId":"CurrencyController_createCurrency_v1","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCurrencyDto"}}}},"responses":{"201":{"description":"The currency has been successfully created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CurrencyResponseDto"}}}},"400":{"description":"Invalid input data or currency code already exists"},"401":{"description":"Invalid or missing API key"}},"security":[{"basic":[]}],"summary":"Create a new currency","tags":["currencies"]},"get":{"description":"Retrieves a paginated list of currencies","operationId":"CurrencyController_listCurrencies_v1","parameters":[{"name":"page","required":false,"in":"query","description":"Page number","schema":{"minimum":1,"example":1,"type":"number"}},{"name":"limit","required":false,"in":"query","description":"Number of items per page","schema":{"minimum":1,"maximum":100,"example":10,"type":"number"}},{"name":"search","required":false,"in":"query","description":"Search currencies by code or name (partial match)","schema":{"example":"USD","type":"string"}}],"responses":{"200":{"description":"The currencies have been successfully retrieved","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/CurrencyResponseDto"}},"total":{"type":"number","description":"Total number of currencies"},"page":{"type":"number","description":"Current page number"},"limit":{"type":"number","description":"Items per page"},"totalPages":{"type":"number","description":"Total number of pages"}}}}}},"401":{"description":"Invalid or missing API key"}},"security":[{"basic":[]}],"summary":"List currencies","tags":["currencies"]}},"/v1/currencies/{code}":{"get":{"description":"Retrieves a single currency by its code","operationId":"CurrencyController_getCurrency_v1","parameters":[{"name":"code","required":true,"in":"path","description":"Currency code (e.g., USD, EUR)","schema":{"example":"USD","type":"string"}}],"responses":{"200":{"description":"The currency has been successfully retrieved","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CurrencyResponseDto"}}}},"401":{"description":"Invalid or missing API key"},"404":{"description":"Currency not found"}},"security":[{"basic":[]}],"summary":"Get a currency by code","tags":["currencies"]},"delete":{"description":"Deletes a currency by its code. Cannot delete if ledger accounts are using it.","operationId":"CurrencyController_deleteCurrency_v1","parameters":[{"name":"code","required":true,"in":"path","description":"Currency code to delete","schema":{"example":"BTC","type":"string"}}],"responses":{"200":{"description":"The currency has been successfully deleted"},"400":{"description":"Currency is being used by ledger accounts and cannot be deleted"},"401":{"description":"Invalid or missing API key"},"404":{"description":"Currency not found"}},"security":[{"basic":[]}],"summary":"Delete a currency by code","tags":["currencies"]}},"/v1/ledger_transactions":{"post":{"description":"Creates a new ledger transaction with the provided details","operationId":"LedgerTransactionController_create_v1","parameters":[{"name":"idempotency-key","in":"header","description":"Unique key to prevent duplicate transactions","required":true,"schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RecordLedgerTransactionDto"}}}},"responses":{"201":{"description":"The ledger transaction has been successfully created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LedgerTransactionResponseDto"}}}},"400":{"description":"Invalid input data"},"401":{"description":"Invalid or missing API key"}},"security":[{"basic":[]}],"summary":"Create a new ledger transaction","tags":["ledger-transactions"]},"get":{"description":"Retrieves a paginated list of ledger transactions","operationId":"LedgerTransactionController_list_v1","parameters":[{"name":"limit","required":false,"in":"query","description":"Number of items per page","schema":{"minimum":0,"maximum":1000,"default":15,"example":10,"type":"number"}},{"name":"afterCursor","required":false,"in":"query","description":"Return items that appear after the item identified by this cursor","schema":{"example":"01234567-89ab-cdef-0123-456789abcdef","type":"string"}},{"name":"beforeCursor","required":false,"in":"query","description":"Return items that appear before the item identified by this cursor","schema":{"example":"fedcba98-7654-3210-fedc-ba9876543210","type":"string"}},{"name":"externalId","required":false,"in":"query","description":"Filter by external ID","schema":{"example":"550e8400-e29b-41d4-a716-446655440000","type":"string"}},{"name":"search","required":false,"in":"query","description":"Search by transaction description","schema":{"example":"Payment for invoice","type":"string"}},{"name":"metadata","required":false,"in":"query","description":"Filter by metadata key/value pairs using Stripe convention: ?metadata[key]=value","schema":{"type":"object","additionalProperties":{"type":"string"}}},{"name":"cursor","required":false,"in":"query","description":"Cursor for pagination","schema":{"example":"01234567-89ab-cdef-0123-456789abcdef","type":"string"}}],"responses":{"200":{"description":"The ledger transactions have been successfully retrieved","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/LedgerTransactionResponseDto"}},"nextCursor":{"type":"string","description":"Cursor for the next page","example":"01234567-89ab-cdef-0123-456789abcdef"},"prevCursor":{"type":"string","description":"Cursor for the previous page","example":"01234567-89ab-cdef-0123-456789abcdef"},"hasNext":{"type":"boolean","description":"Whether there are more items after this page"},"hasPrev":{"type":"boolean","description":"Whether there are more items before this page"}}}}}},"401":{"description":"Invalid or missing API key"}},"security":[{"basic":[]}],"summary":"List ledger transactions","tags":["ledger-transactions"]}},"/v1/ledger_transactions/{id}":{"get":{"description":"Retrieves a single ledger transaction by its unique identifier or external ID","operationId":"LedgerTransactionController_retrieve_v1","parameters":[{"name":"id","required":true,"in":"path","description":"Unique identifier or externalId of the ledger transaction","schema":{"example":"01234567-89ab-cdef-0123-456789abcdef","type":"string"}}],"responses":{"200":{"description":"The ledger transaction has been successfully retrieved","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LedgerTransactionResponseDto"}}}},"401":{"description":"Invalid or missing API key"},"404":{"description":"Ledger transaction not found"}},"security":[{"basic":[]}],"summary":"Get a ledger transaction by ID","tags":["ledger-transactions"]}},"/v1/ledger_transactions/{id}/post":{"post":{"description":"Post a pending transaction","operationId":"LedgerTransactionController_postPendingTransaction_v1","parameters":[{"name":"id","required":true,"in":"path","description":"Unique identifier of the ledger transaction","schema":{"example":"a7f68f16-9834-4a6e-9a7d-5e9f4fc1d1a2","type":"string"}},{"name":"idempotency-key","in":"header","description":"Unique key to prevent duplicate transactions","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"The ledger transaction has been successfully posted","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LedgerTransactionResponseDto"}}}},"400":{"description":"Invalid input data"},"401":{"description":"Invalid or missing API key"}},"security":[{"basic":[]}],"summary":"Post a pending transaction","tags":["ledger-transactions"]}},"/v1/ledger_transactions/{id}/archive":{"post":{"description":"Archive a pending transaction","operationId":"LedgerTransactionController_archivePendingTransaction_v1","parameters":[{"name":"id","required":true,"in":"path","description":"Unique identifier of the ledger transaction","schema":{"example":"a7f68f16-9834-4a6e-9a7d-5e9f4fc1d1a2","type":"string"}},{"name":"idempotency-key","in":"header","description":"Unique key to prevent duplicate transactions","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"The ledger transaction has been successfully archived","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LedgerTransactionResponseDto"}}}},"400":{"description":"Invalid input data"},"401":{"description":"Invalid or missing API key"}},"security":[{"basic":[]}],"summary":"Archive a pending transaction","tags":["ledger-transactions"]}},"/v1/ledger_entries":{"get":{"description":"Retrieves a paginated list of ledger entries","operationId":"LedgerEntryController_list_v1","parameters":[{"name":"limit","required":false,"in":"query","description":"Number of items per page","schema":{"minimum":0,"maximum":1000,"default":15,"example":10,"type":"number"}},{"name":"afterCursor","required":false,"in":"query","description":"Return items that appear after the item identified by this cursor","schema":{"example":"01234567-89ab-cdef-0123-456789abcdef","type":"string"}},{"name":"beforeCursor","required":false,"in":"query","description":"Return items that appear before the item identified by this cursor","schema":{"example":"fedcba98-7654-3210-fedc-ba9876543210","type":"string"}},{"name":"ledgerId","required":false,"in":"query","description":"Filter by ledger ID","schema":{"example":"550e8400-e29b-41d4-a716-446655440000","type":"string"}},{"name":"transactionId","required":false,"in":"query","description":"Filter by transaction ID (native)","schema":{"example":"550e8400-e29b-41d4-a716-446655440000","type":"string"}},{"name":"transactionExternalId","required":false,"in":"query","description":"Filter by transaction external ID","schema":{"example":"tx_external_123","type":"string"}},{"name":"accountId","required":false,"in":"query","description":"Filter by account ID (native)","schema":{"example":"550e8400-e29b-41d4-a716-446655440000","type":"string"}},{"name":"accountExternalId","required":false,"in":"query","description":"Filter by account external ID","schema":{"example":"acc_external_123","type":"string"}},{"name":"direction","required":false,"in":"query","description":"Filter by direction (credit or debit)","schema":{"enum":["credit","debit"],"type":"string"}},{"name":"cursor","required":false,"in":"query","description":"Cursor for pagination","schema":{"example":"01234567-89ab-cdef-0123-456789abcdef","type":"string"}}],"responses":{"200":{"description":"The ledger entries have been successfully retrieved","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/LedgerEntryStandaloneResponseDto"}},"nextCursor":{"type":"string","description":"Cursor for the next page","example":"01234567-89ab-cdef-0123-456789abcdef"},"prevCursor":{"type":"string","description":"Cursor for the previous page","example":"01234567-89ab-cdef-0123-456789abcdef"},"hasNext":{"type":"boolean","description":"Whether there are more items after this page"},"hasPrev":{"type":"boolean","description":"Whether there are more items before this page"}}}}}},"401":{"description":"Invalid or missing API key"}},"security":[{"basic":[]}],"summary":"List ledger entries","tags":["ledger-entries"]}}},"info":{"title":"Core API","description":"Financial ledger and accounting API","version":"1.0","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"basic":{"type":"http","scheme":"basic","description":"Use API Key ID as username and API Secret as password"}},"schemas":{"CreateUserDto":{"type":"object","properties":{"email":{"type":"string","example":"user@example.com","description":"User email address"},"password":{"type":"string","description":"User password"}},"required":["email","password"]},"UserResponseDto":{"type":"object","properties":{}},"LoginDto":{"type":"object","properties":{"email":{"type":"string","example":"user@example.com","description":"User email address"},"password":{"type":"string","description":"User password"}},"required":["email","password"]},"LoginResponseDto":{"type":"object","properties":{"token":{"type":"string","description":"JWT access token"}},"required":["token"]},"CreateKeyDto":{"type":"object","properties":{}},"KeyResponseDto":{"type":"object","properties":{}},"DeleteKeyDto":{"type":"object","properties":{}},"CreateLedgerDto":{"type":"object","properties":{"name":{"type":"string","description":"Name of the ledger","example":"Company General Ledger","minLength":3,"maxLength":255},"description":{"type":"string","description":"Description of the ledger purpose","example":"Main accounting ledger for company operations","minLength":3,"maxLength":255},"metadata":{"type":"object","description":"Additional data represented as key-value pairs. Both the key and value must be strings.","additionalProperties":{"type":"string"},"example":{"source":"web","region":"NA"}}},"required":["name"]},"LedgerResponseDto":{"type":"object","properties":{"id":{"type":"string","description":"Unique identifier for the ledger","example":"01234567-89ab-cdef-0123-456789abcdef"},"name":{"type":"string","description":"Name of the ledger","example":"Company General Ledger"},"description":{"type":"string","description":"Description of the ledger's purpose","example":"Main accounting ledger for company operations","nullable":true},"metadata":{"type":"object","description":"Additional data represented as key-value pairs. Both the key and value must be strings.","example":{"source":"web"},"additionalProperties":{"type":"string"}},"createdAt":{"format":"date-time","type":"string","example":"2023-12-01T10:00:00Z"},"updatedAt":{"format":"date-time","type":"string","example":"2023-12-01T10:00:00Z"}},"required":["id","name","description","createdAt","updatedAt"]},"UpdateLedgerDto":{"type":"object","properties":{"name":{"type":"string","description":"Name of the ledger","example":"Company General Ledger","minLength":3,"maxLength":255},"description":{"type":"string","description":"Description of the ledger purpose","example":"Main accounting ledger for company operations","minLength":3,"maxLength":255},"metadata":{"type":"object","description":"Additional data represented as key-value pairs. Both the key and value must be strings.","example":{"key":"currency","value":"USD"},"additionalProperties":{"type":"string","maxLength":255,"minLength":3}}}},"CreateLedgerAccountDto":{"type":"object","properties":{"ledgerId":{"type":"string","description":"Ledger id associated with the ledger account","example":"550e8400-e29b-41d4-a716-446655440000","minLength":36,"maxLength":36},"name":{"type":"string","description":"Name of the ledger account","example":"Company General Ledger","minLength":3,"maxLength":255},"description":{"type":"string","description":"Description of the ledger account purpose","example":"Main accounting ledger account for company operations","minLength":3,"maxLength":255},"metadata":{"type":"object","description":"Additional data represented as key-value pairs. Both the key and value must be strings.","example":{"currency":"USD","region":"US"},"additionalProperties":{"type":"string","maxLength":255,"minLength":3}},"currency":{"type":"string","description":"Currency code of the ledger account (ISO 4217)","example":"USD","minLength":3,"maxLength":4},"normalBalance":{"type":"string","description":"Normal balance type for the ledger account","enum":["credit","debit"],"example":"debit"},"externalId":{"type":"string","description":"External identifier for the ledger account","minLength":1,"maxLength":180,"example":"550e8400-e29b-41d4-a716-446655440000"}},"required":["ledgerId","name","currency","normalBalance"]},"BalanceDto":{"type":"object","properties":{"credits":{"type":"number","description":"Total credits","example":1000},"debits":{"type":"number","description":"Total debits","example":500},"amount":{"type":"number","description":"Net amount","example":500},"currency":{"type":"string","description":"Currency code (ISO 4217)","example":"USD"},"currencyExponent":{"type":"number","description":"Currency exponent (number of decimal places, e.g., 2 for USD)","example":2,"minimum":0,"maximum":30}},"required":["credits","debits","amount","currency","currencyExponent"]},"LedgerAccountBalancesDto":{"type":"object","properties":{"pendingBalance":{"description":"Pending balance","allOf":[{"$ref":"#/components/schemas/BalanceDto"}]},"postedBalance":{"description":"Posted balance","allOf":[{"$ref":"#/components/schemas/BalanceDto"}]},"availableBalance":{"description":"Available balance","allOf":[{"$ref":"#/components/schemas/BalanceDto"}]}},"required":["pendingBalance","postedBalance","availableBalance"]},"LedgerAccountResponseDto":{"type":"object","properties":{"id":{"type":"string","description":"Ledger account unique identifier","example":"550e8400-e29b-41d4-a716-446655440000"},"name":{"type":"string","description":"Name of the ledger account","example":"Cash account"},"description":{"type":"string","description":"Description of the ledger account","example":"Main accounting ledger account","nullable":true},"normalBalance":{"type":"string","description":"Normal balance type","example":"DEBIT"},"ledgerId":{"type":"string","description":"Associated ledger ID","example":"550e8400-e29b-41d4-a716-446655440000"},"externalId":{"type":"string","description":"External identifier for the ledger account","example":"EXT-12345","nullable":true},"maxBalanceLimit":{"type":"object","description":"Max available balance on the account.","example":1000000},"minBalanceLimit":{"type":"object","description":"Min available balance on the account.","example":100000},"balances":{"description":"Balances of the ledger account","allOf":[{"$ref":"#/components/schemas/LedgerAccountBalancesDto"}]},"metadata":{"type":"object","description":"Additional data represented as key-value pairs. Both the key and value must be strings.","example":{"key":"currency","value":"USD"},"additionalProperties":{"type":"string","minLength":1,"maxLength":1}},"createdAt":{"format":"date-time","type":"string","description":"Creation timestamp","example":"2025-10-20T13:42:14.971Z"},"updatedAt":{"format":"date-time","type":"string","description":"Last update timestamp","example":"2025-10-20T13:42:14.971Z"}},"required":["id","name","description","normalBalance","ledgerId","externalId","maxBalanceLimit","minBalanceLimit","balances","createdAt","updatedAt"]},"UpdateLedgerAccountDto":{"type":"object","properties":{"name":{"type":"string","description":"Name of the ledger account","example":"Company General Ledger","minLength":3,"maxLength":255},"description":{"type":"string","description":"Description of the ledger account purpose","example":"Main accounting ledger account for company operations","minLength":3,"maxLength":255},"metadata":{"type":"object","description":"Additional data represented as key-value pairs. Both the key and value must be strings.","example":{"currency":"USD","region":"US"},"additionalProperties":{"type":"string","maxLength":255,"minLength":3}},"maxBalanceLimit":{"type":"object","description":"Max available balance on the account.","example":1000000},"minBalanceLimit":{"type":"object","description":"Min available balance on the account.","example":100000}}},"CreateCurrencyDto":{"type":"object","properties":{"code":{"type":"string","description":"Currency code (e.g., USD, EUR, BTC)","example":"BTC","maxLength":10},"exponent":{"type":"number","description":"Number of decimal places for the currency","example":8,"minimum":0,"maximum":18},"name":{"type":"string","description":"Full name of the currency","example":"Bitcoin","maxLength":100}},"required":["code","exponent","name"]},"CurrencyResponseDto":{"type":"object","properties":{"id":{"type":"number","description":"Unique identifier of the currency","example":1},"code":{"type":"string","description":"Currency code","example":"USD"},"exponent":{"type":"number","description":"Number of decimal places for the currency","example":2},"name":{"type":"string","description":"Full name of the currency","example":"US Dollar"},"createdAt":{"format":"date-time","type":"string","description":"When the currency was created","example":"2023-01-01T00:00:00Z"},"updatedAt":{"format":"date-time","type":"string","description":"When the currency was last updated","example":"2023-01-01T00:00:00Z"}},"required":["id","code","exponent","name","createdAt","updatedAt"]},"RecordLedgerEntryDto":{"type":"object","properties":{"sourceAccountId":{"type":"string","description":"UUID of the source ledger account","example":"a7f68f16-9834-4a6e-9a7d-5e9f4fc1d1a2"},"destinationAccountId":{"type":"string","description":"UUID of the destination ledger account","example":"b2e58f27-7234-4e3d-8b2c-8f8f8c5edc23"},"amount":{"type":"number","description":"Amount to transfer","example":10},"sourceMetadata":{"type":"object","description":"Additional data associated with source entry represented as key-value pairs. Keys and values must be strings, max length 255.","example":{"currency":"USD","region":"US"},"additionalProperties":{"type":"string","maxLength":255,"minLength":3}},"destinationMetadata":{"type":"object","description":"Additional data associated with destination entry represented as key-value pairs. Keys and values must be strings, max length 255.","example":{"currency":"USD","region":"US"},"additionalProperties":{"type":"string","maxLength":255,"minLength":3}}},"required":["sourceAccountId","destinationAccountId","amount"]},"RecordLedgerTransactionDto":{"type":"object","properties":{"description":{"type":"string","description":"Description or memo for the transaction","minLength":3,"maxLength":255,"example":"Payout for September"},"externalId":{"type":"string","description":"External system reference ID (must be unique per transaction)","minLength":1,"maxLength":180,"example":"019a01db-372e-773e-b984-aa2a44412026"},"ledgerEntries":{"description":"Array of ledger entries involved in the transaction","minItems":1,"maxItems":1000,"type":"array","items":{"$ref":"#/components/schemas/RecordLedgerEntryDto"}},"metadata":{"type":"object","description":"Additional data represented as key-value pairs. Keys and values must be strings, max length 255.","example":{"currency":"USD","region":"US"},"additionalProperties":{"type":"string","maxLength":255,"minLength":3}},"effectiveAt":{"type":"string","example":"2025-10-08T20:53:21.239Z","description":"Format: ISO8601. Defaults to time of insertion in the DB if not provided"},"status":{"type":"string","description":"Status of the transaction","enum":["pending","posted"],"example":"posted"}},"required":["description","externalId","ledgerEntries"]},"LedgerEntryResponseDto":{"type":"object","properties":{"id":{"type":"string","description":"Unique identifier for the ledger entry","example":"019a01db-36c3-76fe-95e7-5b94c636b558"},"createdAt":{"format":"date-time","type":"string","description":"Timestamp when the entry was created","example":"2025-10-03T10:00:00.000Z"},"updatedAt":{"format":"date-time","type":"string","description":"Timestamp when the entry was last updated","example":"2025-10-03T12:00:00.000Z"},"amount":{"type":"number","description":"Amount for the ledger entry (in smallest currency unit)","example":1000},"direction":{"type":"string","description":"Direction of the entry (debit or credit)","enum":["credit","debit"],"example":"debit"},"ledgerAccountId":{"type":"string","description":"ID of the associated ledger account","example":"019a01db-36c3-76fe-95e7-5da1acaa71a2"},"ledgerAccountCurrency":{"type":"string","description":"Currency code for the ledger account (ISO 4217)","example":"USD"},"ledgerAccountCurrencyExponent":{"type":"number","description":"Currency exponent (e.g., 2 for USD, meaning 2 decimal places)","example":2},"ledgerAccountName":{"type":"string","description":"Name of the associated ledger account","example":"Cash Account"},"metadata":{"type":"object","description":"Additional metadata as key-value pairs. Both keys and values must be strings.","example":{"source":"api","tag":"invoice"},"additionalProperties":{"type":"string","minLength":1,"maxLength":255}}},"required":["id","createdAt","updatedAt","amount","direction","ledgerAccountId","ledgerAccountCurrency","ledgerAccountCurrencyExponent","ledgerAccountName"]},"LedgerTransactionResponseDto":{"type":"object","properties":{"id":{"type":"string","description":"Unique identifier for the transaction","example":"019a01db-36c3-76fe-95e7-605d22c4c4fb"},"createdAt":{"format":"date-time","type":"string","description":"Timestamp when the transaction was created","example":"2025-10-03T10:00:00.000Z"},"updatedAt":{"format":"date-time","type":"string","description":"Timestamp when the transaction was last updated","example":"2025-10-03T12:00:00.000Z"},"externalId":{"type":"string","description":"External system ID for cross-reference","example":"019a01db-36c3-76fe-95e7-656748f056cf"},"status":{"type":"string","description":"Status of the transaction","enum":["posted","archived","pending"],"example":"posted"},"description":{"type":"string","description":"Description or memo for the transaction","example":"Payout for September"},"ledgerEntries":{"description":"List of ledger entries associated with the transaction","minItems":2,"example":[{"id":"0199aaf9-9a19-736c-a9cb-21aaaf7e1218","createdAt":"2025-10-03T10:00:00.000Z","updatedAt":"2025-10-03T12:00:00.000Z","amount":1000,"direction":"credit","ledgerAccountId":"0199aaf9-9a19-736c-a9cb-24af81bf5d1a","ledgerAccountCurrency":"USD","ledgerAccountCurrencyExponent":2},{"id":"0199aaf9-9a19-736c-a9cb-21aaaf7e1217","createdAt":"2025-10-03T10:00:00.000Z","updatedAt":"2025-10-03T12:00:00.000Z","amount":1000,"direction":"debit","ledgerAccountId":"0199aaf9-9a19-736c-a9cb-24af81bf5d1b","ledgerAccountCurrency":"USD","ledgerAccountCurrencyExponent":2}],"type":"array","items":{"$ref":"#/components/schemas/LedgerEntryResponseDto"}},"metadata":{"type":"object","description":"Additional metadata as key-value pairs. Both keys and values must be strings.","example":{"source":"api","tag":"invoice"},"additionalProperties":{"type":"string","minLength":1,"maxLength":255}},"effectiveAt":{"format":"date-time","type":"string","example":"2025-10-08T20:53:21.239Z","description":"Format: ISO8601. Defaults to time of insertion in the DB if not provided"}},"required":["id","createdAt","updatedAt","externalId","status","description","ledgerEntries","effectiveAt"]},"LedgerEntryTransactionDto":{"type":"object","properties":{"id":{"type":"string","description":"Unique identifier for the transaction","example":"019a01db-36c0-766b-be54-a405869b4ef9"},"externalId":{"type":"string","description":"External system ID for cross-reference","example":"019a01db-36c0-766b-be54-aaab81318aee"}},"required":["id","externalId"]},"LedgerEntryAccountDto":{"type":"object","properties":{"id":{"type":"string","description":"Ledger account unique identifier","example":"550e8400-e29b-41d4-a716-446655440000"},"name":{"type":"string","description":"Name of the ledger account","example":"Cash account"}},"required":["id","name"]},"LedgerEntryCurrencyDto":{"type":"object","properties":{"code":{"type":"string","description":"Currency code (ISO 4217)","example":"USD"},"exponent":{"type":"number","description":"Currency exponent (e.g., 2 for USD, meaning 2 decimal places)","example":2}},"required":["code","exponent"]},"LedgerEntryStandaloneResponseDto":{"type":"object","properties":{"id":{"type":"string","description":"Unique identifier for the ledger entry","example":"019a01db-36c0-766b-be54-ad6675705927"},"createdAt":{"format":"date-time","type":"string","description":"Timestamp when the entry was created","example":"2025-10-03T10:00:00.000Z"},"updatedAt":{"format":"date-time","type":"string","description":"Timestamp when the entry was last updated","example":"2025-10-03T12:00:00.000Z"},"amount":{"type":"number","description":"Amount for the ledger entry (in smallest currency unit)","example":1000},"direction":{"type":"string","description":"Direction of the entry (debit or credit)","enum":["credit","debit"],"example":"debit"},"ledgerId":{"type":"string","description":"ID of the associated ledger","example":"019a01db-36c0-766b-be54-b256b657f8b6"},"ledgerTransaction":{"description":"Associated ledger transaction","allOf":[{"$ref":"#/components/schemas/LedgerEntryTransactionDto"}]},"ledgerAccount":{"description":"Associated ledger account","allOf":[{"$ref":"#/components/schemas/LedgerEntryAccountDto"}]},"currency":{"description":"Currency for the ledger entry derived from the ledger account ","allOf":[{"$ref":"#/components/schemas/LedgerEntryCurrencyDto"}]},"status":{"type":"string","description":"Status of the entry","enum":["posted","archived","pending"],"example":"posted"},"metadata":{"type":"object","description":"Additional metadata as key-value pairs. Both keys and values must be strings.","example":{"source":"api","tag":"invoice"},"additionalProperties":{"type":"string","minLength":1,"maxLength":255}}},"required":["id","createdAt","updatedAt","amount","direction","ledgerId","ledgerTransaction","ledgerAccount","currency","status"]}}}}